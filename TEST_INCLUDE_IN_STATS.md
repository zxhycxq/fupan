# 参与统计功能测试指南

## 测试步骤

### 1. 查看列表
1. 打开考试记录列表页面
2. 找到"参与统计"列（在"用时"列之后）
3. 确认表头有 tooltip 说明
4. 确认所有记录默认显示为"开启"状态（绿色勾选图标）

### 2. 切换状态
1. 点击某条记录的"参与统计"按钮
2. 确认状态切换为"关闭"（灰色叉号图标）
3. 确认显示成功提示消息
4. 刷新页面，确认状态保持为"关闭"

### 3. 验证数据过滤
1. 记录当前"数据总览"页面的统计数据
2. 在列表中关闭某条记录的"参与统计"
3. 刷新"数据总览"页面
4. 确认统计数据已更新（不包含关闭的记录）
5. 在"各模块分析"页面验证同样的过滤效果

### 4. 恢复状态
1. 点击之前关闭的记录的"参与统计"按钮
2. 确认状态切换回"开启"
3. 刷新"数据总览"和"各模块分析"页面
4. 确认统计数据恢复正常

## 预期结果

### 列表显示
- ✅ "参与统计"列显示在"用时"列之后
- ✅ 表头有 tooltip 说明
- ✅ 开启状态：绿色 ✓ 图标 + "开启"文字
- ✅ 关闭状态：灰色 ✗ 图标 + "关闭"文字

### 交互功能
- ✅ 点击按钮可切换状态
- ✅ 切换后显示成功提示
- ✅ 状态立即保存到数据库
- ✅ 刷新页面后状态保持

### 数据过滤
- ✅ 数据总览只统计开启的记录
- ✅ 各模块分析只统计开启的记录
- ✅ 考试记录列表显示所有记录
- ✅ 切换状态后需要刷新页面才能看到统计变化

## 测试数据

可以使用以下 SQL 快速测试：

```sql
-- 查看所有记录的参与统计状态
SELECT exam_name, include_in_stats 
FROM exam_records 
ORDER BY sort_order;

-- 手动关闭某条记录的参与统计
UPDATE exam_records 
SET include_in_stats = false 
WHERE exam_name = '测试考试名称';

-- 恢复所有记录的参与统计
UPDATE exam_records 
SET include_in_stats = true;
```

## 常见问题

### Q: 关闭参与统计后，记录还能在列表中看到吗？
A: 可以。关闭参与统计只是不参与数据分析，记录仍然在列表中显示。

### Q: 切换状态后，数据总览页面没有变化？
A: 需要刷新页面才能看到最新的统计结果。

### Q: 默认状态是什么？
A: 默认所有记录都参与统计（include_in_stats=true）。

### Q: 可以批量修改吗？
A: 目前只支持单条记录修改，如需批量修改可以使用 SQL。
