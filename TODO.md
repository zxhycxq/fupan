# Task: 修复OCR识别不完整问题

## Plan
- [x] Step 1: 优化会员购买弹窗为横向3列布局
- [x] Step 2: 优化考试记录列表查询表单
- [x] Step 3: 在设置页面添加功能反馈&建议模块
- [x] Step 4: 修复OCR识别不完整问题
  - [x] Sub-task 4.1: 分析识别逻辑，找出模块缺失原因
  - [x] Sub-task 4.2: 修改大模块解析逻辑，即使未识别也创建空记录
  - [x] Sub-task 4.3: 修改子模块解析逻辑，即使未识别也创建空记录
  - [x] Sub-task 4.4: 修复TypeScript类型错误
  - [x] Sub-task 4.5: 提交代码
- [x] Step 5: 实现用户手动添加/删除子模块功能
  - [x] Sub-task 5.1: 添加 API 函数（addModuleScore、deleteModuleScore）
  - [x] Sub-task 5.2: 在每个大模块下添加"+"按钮
  - [x] Sub-task 5.3: 创建添加子模块对话框
  - [x] Sub-task 5.4: 实现删除子模块功能
  - [x] Sub-task 5.5: 根据模块类型控制"+"按钮显示
  - [x] Sub-task 5.6: 提交代码

## Notes
- ✅ 已修复OCR识别不完整问题：即使未识别到模块/子模块，也会创建空记录（题数为0）
- ✅ 确保所有固定模块（如"语句表达"）都会显示在结果中
- ✅ 已实现用户手动添加/删除子模块功能：
  - 在每个大模块下添加"+"按钮，支持手动添加子模块
  - 添加的子模块可以删除（显示删除图标）
  - 言语理解和判断推理的子模块数量固定（3个和4个），达到数量后隐藏"+"按钮
  - 其他模块可以自由添加子模块
- ℹ️ 提交记录：
  - 1a942f4: UI优化和功能反馈
  - 067d2de: TODO.md更新
  - f1f3742: 系统自动提交
  - 1c56888: 修复OCR识别不完整问题
  - f927474: 添加手动添加/删除子模块功能

## Completed
1. ✅ 会员购买弹窗优化：
   - 弹窗宽度调整为1000px
   - 使用 grid-cols-3 实现3列布局
   - 调整内边距为 p-4，字体大小为 text-xs
2. ✅ 考试记录查询表单优化：
   - 统一使用 mb-0 减少间距
   - 调整 gutter 为 [16, 16]
   - 列宽配置优化
3. ✅ 功能反馈&建议模块：
   - 添加 Card 组件展示反馈入口
   - 提供飞书表单链接按钮
4. ✅ OCR识别不完整问题修复：
   - 修改 dataParser.ts 解析逻辑
   - 即使模块名称未找到，也创建空记录
   - 即使大模块数据未识别，也创建空记录
   - 即使子模块数据未识别，也创建空记录
   - 所有固定模块都会显示在结果中（题数为0）
   - 支持后续用户手动编辑/追加数据
5. ✅ 手动添加/删除子模块功能：
   - 新增 API 函数：addModuleScore、deleteModuleScore
   - 在每个大模块下添加"+"按钮
   - 创建添加子模块对话框（输入名称、总题数、答对数、用时）
   - 实现删除子模块功能（只能删除手动添加的子模块）
   - 言语理解和判断推理的子模块数量固定（3个和4个）
   - 其他模块可以自由添加子模块
   - 自动计算正确率、错误数等字段
